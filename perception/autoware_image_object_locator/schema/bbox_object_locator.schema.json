{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Parameters for BBOX Object Locator",
  "type": "object",
  "definitions": {
    "bbox_object_locator": {
      "type": "object",
      "properties": {
        "target_frame": {
          "type": "string",
          "description": "Transform target frame.",
          "default": "base_link"
        },
        "detection_target_class": {
          "type": "object",
          "properties": {
            "UNKNOWN": {
              "type": "boolean",
              "description": "If true, objects with the 'UNKNOWN' label will be ignored during processing.",
              "default": true
            },
            "CAR": {
              "type": "boolean",
              "description": "If true, objects with the 'CAR' label will be ignored during processing.",
              "default": true
            },
            "TRUCK": {
              "type": "boolean",
              "description": "If true, objects with the 'TRUCK' label will be ignored during processing.",
              "default": true
            },
            "BUS": {
              "type": "boolean",
              "description": "If true, objects with the 'BUS' label will be ignored during processing.",
              "default": true
            },
            "TRAILER": {
              "type": "boolean",
              "description": "If true, objects with the 'TRAILER' label will be ignored during processing.",
              "default": true
            },
            "MOTORCYCLE": {
              "type": "boolean",
              "description": "If true, objects with the 'MOTORCYCLE' label will be ignored during processing.",
              "default": true
            },
            "BICYCLE": {
              "type": "boolean",
              "description": "If true, objects with the 'BICYCLE' label will be ignored during processing.",
              "default": true
            },
            "PEDESTRIAN": {
              "type": "boolean",
              "description": "If true, objects with the 'PEDESTRIAN' label will be ignored during processing.",
              "default": false
            }
          }
        },
        "roi_confidence_threshold": {
          "type": "number",
          "description": "Threshold value for whether to trust and use the ROI. If the confidence of an ROI is below this value, it will not be used.",
          "default": 0.8,
          "minimum": 0.0,
          "maximum": 1.0
        },
        "roi_truncation_validation": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "array",
              "items": {
                "type": "boolean"
              },
              "description": "Flags to enable validation for each ROI. Must have the same number as the input ROIs.",
              "default": [false, false, false, false, false, false, false, false]
            },
            "remove_truncated": {
              "type": "array",
              "items": {
                "type": "boolean",
                "default": false
              },
              "description": "If this is true, the object will be removed when its ROI is evaluated as truncated. Must have the same number as the input ROIs.",
              "default": [false, false, false, false, false, false, false, false]
            },
            "image_border_truncation_horizontal_margin_ratio": {
              "type": "number",
              "description": "Margin ratio used to detect whether the ROI is truncated based on the image width.",
              "default": 0.0,
              "minimum": 0.0,
              "maximum": 0.5
            },
            "image_border_truncation_vertical_margin_ratio": {
              "type": "number",
              "description": "Margin ratio used to detect whether the ROI is truncated based on the image height.",
              "default": 0.0,
              "minimum": 0.0,
              "maximum": 0.5
            }
          }
        },
        "detection_max_range": {
          "type": "number",
          "description": "Maximum detection range. Objects beyond this distance will not be included in the output [m].",
          "default": 30.0,
          "minimum": 0.0
        },
        "pseudo_height": {
          "type": "number",
          "description": "If height was not able to compute, this value will used as pseudo height of a object [m].",
          "default": 1.5,
          "minimum": 0.1
        },
        "pedestrian_detection_config": {
          "type": "object",
          "properties": {
            "width_min": {
              "type": "number",
              "description": "If the estimated width is smaller than this value, it will be clamped to this value [m].",
              "default": 0.5,
              "minimum": 0.3
            },
            "width_max": {
              "type": "number",
              "description": "If the estimated width is larger than this value, it will be clamped to this value [m].",
              "default": 0.8,
              "minimum": 0.3
            }
          }
        }
      },
      "required": [
        "target_frame",
        "detection_target_class",
        "roi_confidence_threshold",
        "detection_max_range",
        "pseudo_height",
        "pedestrian_detection_config"
      ]
    }
  },
  "properties": {
    "/**": {
      "type": "object",
      "properties": {
        "ros__parameters": {
          "$ref": "#/definitions/bbox_object_locator"
        }
      },
      "required": ["ros__parameters"]
    }
  },
  "required": ["/**"]
}
