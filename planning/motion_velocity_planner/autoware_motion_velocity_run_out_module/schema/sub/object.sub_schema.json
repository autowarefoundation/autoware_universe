{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Run Out module configuration related to the dynamic objects",
  "type": "object",
  "definitions": {
    "objects": {
      "type": "object",
      "properties": {
        "target_labels": {
          "type": "array",
          "description": "List of object labels recognized for specific configuration overrides.",
          "default": ["PEDESTRIAN", "BICYCLE", "MOTORCYCLE"]
        },
        "DEFAULT": {
          "type": "object",
          "description": "Default configuration applied to all objects unless overridden by a specific label.",
          "$ref": "#/definitions/object_specific_config/properties",
          "required": ["ignore", "confidence_filtering", "cut_predicted_paths"]
        }
      },
      "required": ["target_labels", "DEFAULT"],
      "patternProperties": {
        "^[A-Z_]+$": {
          "description": "Optional configuration override for a specific object label (e.g., PEDESTRIAN, BICYCLE). Parameters defined here override the DEFAULT settings.",
          "$ref": "#/definitions/object_specific_config"
        }
      }
    },
    "additionalProperties": false,
    "object_specific_config": {
      "type": "object",
      "properties": {
        "ignore": {
          "type": "object",
          "description": "Conditions under which to ignore objects.",
          "properties": {
            "if_stopped": {
              "type": "boolean",
              "description": "If true, object with a velocity below the threshold are ignored.",
              "default": false
            },
            "stopped_velocity_threshold": {
              "type": "number",
              "description": "[m/s] Velocity threshold below which an object is considered stopped.",
              "default": 0.5
            },
            "if_on_ego_trajectory": {
              "type": "boolean",
              "description": "If true, object located on the ego trajectory footprint are ignored.",
              "default": true
            },
            "if_behind_ego": {
              "type": "boolean",
              "description": "If true, objects located behind the ego vehicles are ignored.",
              "default": true
            },
            "if_on_crosswalk": {
              "type": "boolean",
              "description": "If true, objects located on a crosswalk are ignored.",
              "default": false
            },
            "if_on_yield_lane": {
              "type": "boolean",
              "description": "If true, objects are ignored if coming from a lane yielding to the ego lane.",
              "default": true
            }
          },
          "additionalProperties": false
        },
        "confidence_filtering": {
          "type": "object",
          "description": "Filtering options based on predicted path confidence.",
          "properties": {
            "threshold": {
              "type": "number",
              "description": "[-] Only use predicted paths with a higher confidence value than this threshold.",
              "default": 0.0
            },
            "only_use_highest": {
              "type": "boolean",
              "description": "If true, only the path(s) with the highest confidence are used.",
              "default": true
            }
          },
          "additionalProperties": false
        },
        "cut_predicted_paths": {
          "type": "object",
          "description": "Options to truncate predicted paths of dynamic objects.",
          "properties": {
            "if_crossing_ego_from_behind": {
              "type": "boolean",
              "description": "If true, cut the predicted path after it crosses the ego vehicle's path from behind.",
              "default": true
            },
            "polygon_types": {
              "type": "array",
              "description": "Types of polygons in the vector map used to cut predicted paths.",
              "items": {
                "type": "string"
              },
              "default": ["NONE"]
            },
            "linestring_types": {
              "type": "array",
              "description": "Types of linestrings in the vector map used to cut predicted paths.",
              "items": {
                "type": "string"
              },
              "default": ["guard_rail"]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  }
}
