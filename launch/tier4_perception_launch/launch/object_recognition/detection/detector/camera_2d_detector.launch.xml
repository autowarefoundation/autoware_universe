<?xml version="1.0"?>
<launch>
    <arg name="image_raw0" value="$(var input/camera0/image)"/>
    <arg name="image_raw1" value="$(var input/camera1/image)"/>
    <arg name="image_raw2" value="$(var input/camera2/image)"/>
    <arg name="image_raw3" value="$(var input/camera3/image)"/>
    <arg name="image_raw4" value="$(var input/camera4/image)"/>
    <arg name="image_raw5" value="$(var input/camera5/image)"/>
    <arg name="image_raw6" value="$(var input/camera6/image)"/>
    <arg name="image_raw7" value="$(var input/camera7/image)"/>
    <arg name="image_raw8" value="$(var input/camera8/image)"/>
    <arg name="image_raw9" value="$(var input/camera9/image)"/>
    <arg name="image_number" value="$(var number_of_cameras)"/>
    <arg name="camera_index" default="0"/>
    <arg name="use_bytetrack" default="true" description="use bytetrack for tracking, if false, only detection is performed"/>
    <arg name="enable_visualizer" default="false"/>
    <arg name="tensorrt_yolox_ns" default=""/>
    <let name="tensorrt_yolox_ns" value="yolox/" if="$(var use_bytetrack)"/>


    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="0"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="1"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="2"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="3"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="4"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="5"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="6"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="7"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="8"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

    <group ="$(eval &quot;'$(var image_number)'>='1'&quot;)" >
      <arg name="camera_index" value="9"/>
      <include file="$(find-pkg-share autoware_tensorrt_yolox)/launch/yolox.launch.xml">
        <arg name="yolox_node_name" value="tensorrt_yolox$(var camera_index)"/>
        <arg name="image_transport_decompressor_node_name" value="image_transport_decompressor_node$(var camera_index)"/>
        <arg name="input/image" value="$(var image_raw0)"/>
        <arg name="output/objects" value="$(var tensorrt_yolox_ns)rois$(var camera_index)"/>
      </include>

      <include file="$(find-pkg-share autoware_bytetrack)/launch/bytetrack.launch.xml">
        <arg name="in_image" value="$(var image_raw0)"/>
        <arg name="detection_rect" value="$(var tensorrt_yolox_ns)rois0"/>
        <arg name="tracked_rect" value="rois0"/>
        <arg name="bytetrack_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack.param.yaml"/>
        <arg name="bytetrack_visualizer_param_path" default="$(find-pkg-share autoware_bytetrack)/config/bytetrack_visualizer.param.yaml"/>
        <arg name="enable_visualizer" value="$(var enable_visualizer)"/>
      </include>
    </group>

</launch>
