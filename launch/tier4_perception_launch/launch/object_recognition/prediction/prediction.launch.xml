<?xml version="1.0"?>
<launch>
  <arg name="use_vector_map" default="false" description="use vector map in prediction"/>
  <arg name="use_ml_prediction" default="true" description="use ml model instead of rule-based algorithm"/>
  <arg name="input/objects" default="/perception/object_recognition/tracking/objects"/>
  <arg name="simpl_data_path" default="$(env HOME)/autoware_data/simpl"/>
  <arg name="simpl_param_path" default="$(find-pkg-share autoware_simpl)/config/simpl.param.yaml"/>

  <group if="$(var use_vector_map)">
    <group unless="$(var use_ml_prediction)">
      <include file="$(find-pkg-share autoware_map_based_prediction)/launch/map_based_prediction.launch.xml">
        <arg name="input_topic" value="$(var input/objects)"/>
        <arg name="output_topic" value="/perception/object_recognition/objects"/>
        <arg name="param_path" value="$(var object_recognition_prediction_map_based_prediction_param_path)"/>
      </include>
    </group>
    <group if="$(var use_ml_prediction)">
      <include file="$(find-pkg-share autoware_simpl)/launch/simpl.launch.xml">
        <arg name="input/objects" value="$(var input/objects)"/>
        <arg name="output/objects" value="/perception/object_recognition/objects"/>
        <arg name="data_path" value="$(var simpl_data_path)"/>
        <arg name="param_path" value="$(var simpl_param_path)"/>
        <arg name="build_only" value="false"/>
      </include>
    </group>
  </group>
  <group unless="$(var use_vector_map)">
    <!-- Not support without vector map -->
  </group>
</launch>
